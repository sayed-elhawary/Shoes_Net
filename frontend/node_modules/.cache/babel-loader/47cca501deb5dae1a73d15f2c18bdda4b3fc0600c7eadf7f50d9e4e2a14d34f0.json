{"ast":null,"code":"// frontend/src/index.js\nimport React from'react';import ReactDOM from'react-dom/client';import{BrowserRouter,useNavigate}from'react-router-dom';import{App as CapacitorApp}from'@capacitor/app';import App from'./App';import'./index.css';// مكون للتحكم في زر الـ Back\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BackButtonHandler=()=>{const navigate=useNavigate();React.useEffect(()=>{let lastBackPress=0;let listener=null;const handleBack=()=>{const path=window.location.pathname;// الصفحات الرئيسية: خروج فقط بضغطتين\nif(['/','/login'].includes(path)){const now=Date.now();if(now-lastBackPress<2000){CapacitorApp.exitApp();}else{lastBackPress=now;showToast('اضغط مرة أخرى للخروج');}return;}// أي صفحة أخرى: ارجع\nnavigate(-1);};CapacitorApp.addListener('backButton',handleBack).then(l=>{listener=l;});return()=>{if(listener)listener.remove();};},[navigate]);return null;};// دالة Toast بسيطة\nconst showToast=msg=>{const toast=document.createElement('div');toast.textContent=msg;toast.style.cssText=\"\\n    position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%);\\n    background: rgba(0,0,0,0.85); color: white; padding: 12px 24px;\\n    border-radius: 8px; font-size: 14px; z-index: 10000;\\n    animation: fade 2s ease-in-out;\\n  \";document.body.appendChild(toast);const style=document.createElement('style');style.textContent=\"\\n    @keyframes fade {\\n      0%, 100% { opacity: 0; transform: translateX(-50%) translateY(10px); }\\n      15%, 85% { opacity: 1; transform: translateX(-50%) translateY(0); }\\n    }\\n  \";document.head.appendChild(style);setTimeout(()=>{if(toast.parentNode)toast.parentNode.removeChild(toast);if(style.parentNode)style.parentNode.removeChild(style);},2000);};// رندر التطبيق\nconst root=ReactDOM.createRoot(document.getElementById('root'));root.render(/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(BackButtonHandler,{}),/*#__PURE__*/_jsx(App,{})]})}));","map":{"version":3,"names":["React","ReactDOM","BrowserRouter","useNavigate","App","CapacitorApp","jsx","_jsx","jsxs","_jsxs","BackButtonHandler","navigate","useEffect","lastBackPress","listener","handleBack","path","window","location","pathname","includes","now","Date","exitApp","showToast","addListener","then","l","remove","msg","toast","document","createElement","textContent","style","cssText","body","appendChild","head","setTimeout","parentNode","removeChild","root","createRoot","getElementById","render","StrictMode","children"],"sources":["/root/shose/shoose-1/frontend/src/index.js"],"sourcesContent":["// frontend/src/index.js\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter, useNavigate } from 'react-router-dom';\nimport { App as CapacitorApp } from '@capacitor/app';\nimport App from './App';\nimport './index.css';\n\n// مكون للتحكم في زر الـ Back\nconst BackButtonHandler = () => {\n  const navigate = useNavigate();\n\n  React.useEffect(() => {\n    let lastBackPress = 0;\n    let listener = null;\n\n    const handleBack = () => {\n      const path = window.location.pathname;\n\n      // الصفحات الرئيسية: خروج فقط بضغطتين\n      if (['/', '/login'].includes(path)) {\n        const now = Date.now();\n        if (now - lastBackPress < 2000) {\n          CapacitorApp.exitApp();\n        } else {\n          lastBackPress = now;\n          showToast('اضغط مرة أخرى للخروج');\n        }\n        return;\n      }\n\n      // أي صفحة أخرى: ارجع\n      navigate(-1);\n    };\n\n    CapacitorApp.addListener('backButton', handleBack).then((l) => {\n      listener = l;\n    });\n\n    return () => {\n      if (listener) listener.remove();\n    };\n  }, [navigate]);\n\n  return null;\n};\n\n// دالة Toast بسيطة\nconst showToast = (msg) => {\n  const toast = document.createElement('div');\n  toast.textContent = msg;\n  toast.style.cssText = `\n    position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%);\n    background: rgba(0,0,0,0.85); color: white; padding: 12px 24px;\n    border-radius: 8px; font-size: 14px; z-index: 10000;\n    animation: fade 2s ease-in-out;\n  `;\n  document.body.appendChild(toast);\n\n  const style = document.createElement('style');\n  style.textContent = `\n    @keyframes fade {\n      0%, 100% { opacity: 0; transform: translateX(-50%) translateY(10px); }\n      15%, 85% { opacity: 1; transform: translateX(-50%) translateY(0); }\n    }\n  `;\n  document.head.appendChild(style);\n\n  setTimeout(() => {\n    if (toast.parentNode) toast.parentNode.removeChild(toast);\n    if (style.parentNode) style.parentNode.removeChild(style);\n  }, 2000);\n};\n\n// رندر التطبيق\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <BackButtonHandler />\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>\n);\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,OAASC,aAAa,CAAEC,WAAW,KAAQ,kBAAkB,CAC7D,OAASC,GAAG,GAAI,CAAAC,YAAY,KAAQ,gBAAgB,CACpD,MAAO,CAAAD,GAAG,KAAM,OAAO,CACvB,MAAO,aAAa,CAEpB;AAAA,OAAAE,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAE9BH,KAAK,CAACY,SAAS,CAAC,IAAM,CACpB,GAAI,CAAAC,aAAa,CAAG,CAAC,CACrB,GAAI,CAAAC,QAAQ,CAAG,IAAI,CAEnB,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAAC,IAAI,CAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAErC;AACA,GAAI,CAAC,GAAG,CAAE,QAAQ,CAAC,CAACC,QAAQ,CAACJ,IAAI,CAAC,CAAE,CAClC,KAAM,CAAAK,GAAG,CAAGC,IAAI,CAACD,GAAG,CAAC,CAAC,CACtB,GAAIA,GAAG,CAAGR,aAAa,CAAG,IAAI,CAAE,CAC9BR,YAAY,CAACkB,OAAO,CAAC,CAAC,CACxB,CAAC,IAAM,CACLV,aAAa,CAAGQ,GAAG,CACnBG,SAAS,CAAC,sBAAsB,CAAC,CACnC,CACA,OACF,CAEA;AACAb,QAAQ,CAAC,CAAC,CAAC,CAAC,CACd,CAAC,CAEDN,YAAY,CAACoB,WAAW,CAAC,YAAY,CAAEV,UAAU,CAAC,CAACW,IAAI,CAAEC,CAAC,EAAK,CAC7Db,QAAQ,CAAGa,CAAC,CACd,CAAC,CAAC,CAEF,MAAO,IAAM,CACX,GAAIb,QAAQ,CAAEA,QAAQ,CAACc,MAAM,CAAC,CAAC,CACjC,CAAC,CACH,CAAC,CAAE,CAACjB,QAAQ,CAAC,CAAC,CAEd,MAAO,KAAI,CACb,CAAC,CAED;AACA,KAAM,CAAAa,SAAS,CAAIK,GAAG,EAAK,CACzB,KAAM,CAAAC,KAAK,CAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC,CAC3CF,KAAK,CAACG,WAAW,CAAGJ,GAAG,CACvBC,KAAK,CAACI,KAAK,CAACC,OAAO,uPAKlB,CACDJ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACP,KAAK,CAAC,CAEhC,KAAM,CAAAI,KAAK,CAAGH,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC,CAC7CE,KAAK,CAACD,WAAW,8LAKhB,CACDF,QAAQ,CAACO,IAAI,CAACD,WAAW,CAACH,KAAK,CAAC,CAEhCK,UAAU,CAAC,IAAM,CACf,GAAIT,KAAK,CAACU,UAAU,CAAEV,KAAK,CAACU,UAAU,CAACC,WAAW,CAACX,KAAK,CAAC,CACzD,GAAII,KAAK,CAACM,UAAU,CAAEN,KAAK,CAACM,UAAU,CAACC,WAAW,CAACP,KAAK,CAAC,CAC3D,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAED;AACA,KAAM,CAAAQ,IAAI,CAAGzC,QAAQ,CAAC0C,UAAU,CAACZ,QAAQ,CAACa,cAAc,CAAC,MAAM,CAAC,CAAC,CACjEF,IAAI,CAACG,MAAM,cACTtC,IAAA,CAACP,KAAK,CAAC8C,UAAU,EAAAC,QAAA,cACftC,KAAA,CAACP,aAAa,EAAA6C,QAAA,eACZxC,IAAA,CAACG,iBAAiB,GAAE,CAAC,cACrBH,IAAA,CAACH,GAAG,GAAE,CAAC,EACM,CAAC,CACA,CACpB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}